# 🐦 SuzumeSBTTV Alert

**Telegram bot for Twitch stream notifications integrated with [Streamer.bot](https://streamer.bot/).**

This bot sends a message to your Telegram channel or chat when your Twitch stream starts.  
Just connect it with Streamer.bot — simple and fast setup!

---

## 🔗 My Links
- **Twitch**: https://www.twitch.tv/pan_suzume
- **Website**: https://deepdungeon.fun/
- **Discord**: https://discord.com/invite/88SUnpA35K
- **Telegram**: https://t.me/pan_suzume

---

## 📥 Installation

1. Install [.NET 8](https://dotnet.microsoft.com/en-us/download/dotnet/8.0) if you don’t already have it.  
2. Download the latest release or compile it from source.  
3. Unzip the files into any folder.  
4. In **Streamer.bot**, go to **SubActions → Run a program**:  
   ![Streamer.bot Configuration](https://github.com/user-attachments/assets/c3dcc5ff-ba39-42e1-b973-a027f9956343)
5. Set the **Target** and **Working Directory** fields.  
   Add arguments such as `%game%`, `%user%`, etc.:  
   ![Arguments Setup](https://github.com/user-attachments/assets/465389f2-73d5-4b5e-80e6-fd6f4144209f)
6. Edit the configuration file as needed.  
7. Set up your Streamer.bot trigger with **Type → "Stream Online"** (or create your own logic).

---

## 🚀 Usage
### 🤖 Gemini AI Integration

To use AI for message generation, set:
```json
"messageLogic": {
    "useAi": true
}
```
otherwise set ``` "useAi": false;```

For proper usage, fill these fields in geminiValues:
```
"geminiValues": {
    "geminiApiKey": "apiKey",
    "textBaseUrl": "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash",
    "prompt": "Create a message for my tg channel"
  }
```

1. Get a **free API key** key: <a href="https://aistudio.google.com/api-keys">Gemini Studio</href></li>
2. Choose your model and update `textBaseUrl`.  
   - Example: `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash`
3. Customize your prompt — the Gemini response will replace `{aiMessage}` in your message template.

## 💬 Telegram Setup

1. Create a bot via <a href="https://telegram.me/BotFather">BotFather</a>
2. Set your bot token in the config: `"token": "here"`
3. Set your chat or channel name: `"chatId": "@your_chat_name"`.  *(Add `@` before your chat name, which you can find in your Telegram link: `t.me/myChannelName`)*  
4. Add your bot to the channel or chat and grant it **admin rights**. 
5. That’s all! Everything should work.  
   It’s recommended to test your setup on a private or test channel first.

## ⚙️ Arguments

You can use arguments in the following fields:
- `prompt`
- `messageWithAi`
- `messageBaseWithArgs`
- `messageBase`

During execution, these placeholders will be replaced with real values.  
Use curly braces for placeholders like `{0}`, `{1}`, etc. 

### Available Variables:
| Variable | Description |
|-----------|-------------|
| `{aiMessage}` | Message generated by Gemini AI |
| `{twitchUrl}` | Your Twitch channel URL |
| `{0}, {1}, {2}, ...` | Custom arguments (e.g. `%game%`, `%user%`, `%date%` from Streamer.bot) |

**Example:**

Prompt:
```
"Create a message to invite my followers to watch my game - {0}"
```

Streamer.bot sends `%game% = Hollow Knight: Silksong` →  
Result:  
> "Create a message to invite my followers to watch my game - Hollow Knight: Silksong"

Arguments work in all fields simultaneously.

---

## 🧩 Field Logic

| Field | Description |
|--------|-------------|
| `messageWithAi` | Used when AI is enabled and available |
| `messageBaseWithArgs` | Used when AI is disabled but arguments exist |
| `messageBase` | Fallback message when no arguments are provided |

If an error occurs, the bot will attempt to send messages in this order:
1. `messageWithAi`  
2. `messageBaseWithArgs`  
3. `messageBase`

---

## 🪵 Log

All requests and errors are stored in a log file located in the app directory.  
To disable logging, set:

```json
"enableLogging": false
```

---

✅ **Enjoy your automatic Twitch → Telegram notifications!**



    
